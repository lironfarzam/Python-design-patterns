<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memento Pattern - תבניות עיצוב בפייתון</title>
    <link rel="stylesheet" href="../css/styles.css">
 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Prism.js CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <!-- Prism.js Core -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <!-- Prism.js Python Language Support -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script></head>
<body>
    <div class="side-nav-container">
        <nav class="side-nav">
            <!-- הסיידבר יוטען כאן באופן דינמי -->
        </nav>
    </div>

    <main class="main-content">
        <header class="rtl-container">
            <h1 class="flex-center">
                <i class="fas fa-history icon"></i>
                Memento Pattern
            </h1>
            <a href="../index.html" class="flex-center">
                <i class="fas fa-arrow-right icon"></i>
                חזרה לדף הבית
            </a>
        </header>

        <section class="card">
            <h2 class="flex-center">
                <i class="fas fa-info-circle icon"></i>
                מהי תבנית Memento?
            </h2>
            <p>תבנית Memento היא תבנית עיצוב התנהגותית המאפשרת לשמור ולשחזר את המצב הפנימי של אובייקט מבלי לחשוף את המבנה הפנימי שלו. התבנית מאפשרת לאובייקט לחזור למצב קודם מבלי להפר את עקרון ההסתרה.</p>
            
            <h3>הסבר למתחילים:</h3>
            <p>דמיינו שיש לכם עורך טקסט. אתם יכולים לכתוב טקסט, למחוק טקסט, ולשנות את הטקסט. אם אתם רוצים לחזור למצב קודם, אתם יכולים להשתמש בתבנית Memento כדי לשמור את המצב של העורך ולחזור אליו מאוחר יותר. זה מאפשר לכם לבטל שינויים ולחזור למצב קודם.</p>
            
            <h3>הסבר למתקדמים:</h3>
            <p>התבנית מיישמת את עקרון ה-Open/Closed Principle על ידי הפרדה בין האובייקט שמשנה את המצב לבין האובייקט שמשמר את המצב. זה מאפשר הוספה של פונקציונליות חדשה ללא צורך בשינוי הקוד הקיים, ומאפשר שמירה ושחזור של מצבים.</p>
        </section>

        <section class="card">
            <h2 class="flex-center">
                <i class="fas fa-question-circle icon"></i>
                מתי להשתמש בתבנית?
            </h2>
            <h3>למתחילים:</h3>
            <ul>
                <li>כאשר יש צורך לשמור ולשחזר את המצב של אובייקט</li>
                <li>כאשר יש צורך לבטל שינויים</li>
                <li>כאשר יש צורך לשמור היסטוריה של מצבים</li>
            </ul>

            <h3>למתקדמים:</h3>
            <ul>
                <li>כאשר יש צורך לשמור ולשחזר את המצב של אובייקט</li>
                <li>כאשר יש צורך לבטל שינויים</li>
                <li>כאשר יש צורך לשמור היסטוריה של מצבים</li>
                <li>כאשר יש צורך לשמור על עקרון ה-Open/Closed Principle</li>
                <li>כאשר יש צורך להפחית את הצימוד בין המחלקות</li>
                <li>כאשר יש צורך לאפשר הרחבה של המערכת עם פונקציונליות חדשה</li>
            </ul>
        </section>

        <section class="card">
            <h2 class="flex-center">
                <i class="fas fa-sitemap icon"></i>
                מבנה התבנית
            </h2>
            <h3>הסבר בסיסי:</h3>
            <p>התבנית מורכבת משלושה חלקים עיקריים:</p>
            <ul>
                <li><strong>Originator</strong> - האובייקט שמשנה את המצב</li>
                <li><strong>Memento</strong> - האובייקט שמשמר את המצב</li>
                <li><strong>Caretaker</strong> - האובייקט שמנהל את ה-Memento</li>
            </ul>

            <h3>הסבר מתקדם:</h3>
            <p>התבנית מורכבת מהמרכיבים הבאים:</p>
            <ul>
                <li><strong>Originator</strong> - האובייקט שמשנה את המצב</li>
                <li><strong>Memento</strong> - האובייקט שמשמר את המצב</li>
                <li><strong>Caretaker</strong> - האובייקט שמנהל את ה-Memento</li>
                <li><strong>Client</strong> - האובייקט שיוצר את ה-Originator ומשתמש ב-Caretaker</li>
            </ul>

            <h3>היחסים בין המרכיבים:</h3>
            <ul>
                <li>Originator יוצר Memento</li>
                <li>Memento משמר את המצב</li>
                <li>Caretaker מנהל את ה-Memento</li>
                <li>Client יוצר את ה-Originator ומשתמש ב-Caretaker</li>
            </ul>
        </section>

        <section class="card">
            <h2 class="flex-center">
                <i class="fas fa-code icon"></i>
                דוגמה בסיסית
            </h2>
            <h3>הסבר למתחילים:</h3>
            <p>בדוגמה הבאה, אנחנו יוצרים עורך טקסט פשוט. העורך יכול לשמור את המצב שלו ולחזור למצב קודם. במקום לכתוב קוד מורכב שמטפל בכל המצבים, אנחנו משתמשים בתבנית Memento כדי לשמור ולשחזר את המצב.</p>

            <h3>הסבר למתקדמים:</h3>
            <p>הדוגמה מדגימה את השימוש ב-Memento Pattern להפרדה בין האובייקט שמשנה את המצב לבין האובייקט שמשמר את המצב. הממשק מגדיר את הפעולות הבסיסיות, והמימושים הספציפיים מספקים את הפונקציונליות.</p>

            <pre><code class="language-python">from typing import List

class Memento:
    def __init__(self, state: str):
        self._state = state
    
    def get_state(self) -> str:
        return self._state

class TextEditor:
    def __init__(self):
        self._text = ""
    
    def write(self, text: str) -> None:
        self._text += text
        print(f"טקסט נוכחי: {self._text}")
    
    def save(self) -> Memento:
        return Memento(self._text)
    
    def restore(self, memento: Memento) -> None:
        self._text = memento.get_state()
        print(f"טקסט משוחזר: {self._text}")

class Caretaker:
    def __init__(self):
        self._mementos: List[Memento] = []
    
    def add_memento(self, memento: Memento) -> None:
        self._mementos.append(memento)
    
    def get_memento(self, index: int) -> Memento:
        return self._mementos[index]

# שימוש
if __name__ == "__main__":
    # יצירת עורך טקסט
    editor = TextEditor()
    
    # יצירת caretaker
    caretaker = Caretaker()
    
    # כתיבת טקסט
    editor.write("שלום")
    caretaker.add_memento(editor.save())
    
    editor.write(" עולם")
    caretaker.add_memento(editor.save())
    
    editor.write("!")
    caretaker.add_memento(editor.save())
    
    # חזרה למצב קודם
    editor.restore(caretaker.get_memento(1))  # שלום עולם
    editor.restore(caretaker.get_memento(0))  # שלום</code></pre>
        </section>

        <section class="card">
            <h2 class="flex-center">
                <i class="fas fa-laptop-code icon"></i>
                דוגמה מעשית - מערכת ניהול מסמכים
            </h2>
            <h3>הסבר למתחילים:</h3>
            <p>בדוגמה זו, אנחנו יוצרים מערכת ניהול מסמכים. המערכת מאפשרת לשמור את המצב של המסמך ולחזור למצב קודם. במקום לכתוב קוד מורכב שמטפל בכל המצבים, אנחנו משתמשים בתבנית Memento כדי לשמור ולשחזר את המצב.</p>

            <h3>הסבר למתקדמים:</h3>
            <p>הדוגמה מדגימה את השימוש ב-Memento Pattern להפרדה בין האובייקט שמשנה את המצב לבין האובייקט שמשמר את המצב. הממשק מגדיר את הפעולות הבסיסיות, והמימושים הספציפיים מספקים את הפונקציונליות.</p>

            <pre><code class="language-python">from typing import List, Dict
from datetime import datetime

class DocumentMemento:
    def __init__(self, content: str, metadata: Dict[str, str]):
        self._content = content
        self._metadata = metadata
        self._timestamp = datetime.now()
    
    def get_content(self) -> str:
        return self._content
    
    def get_metadata(self) -> Dict[str, str]:
        return self._metadata
    
    def get_timestamp(self) -> datetime:
        return self._timestamp

class Document:
    def __init__(self, title: str):
        self._title = title
        self._content = ""
        self._metadata = {
            "author": "",
            "created": datetime.now().strftime("%Y-%m-%d %H:%M:%S"),
            "modified": datetime.now().strftime("%Y-%m-%d %H:%M:%S")
        }
    
    def write(self, content: str) -> None:
        self._content = content
        self._metadata["modified"] = datetime.now().strftime("%Y-%m-%d %H:%M:%S")
        print(f"מסמך {self._title} עודכן")
    
    def set_author(self, author: str) -> None:
        self._metadata["author"] = author
        self._metadata["modified"] = datetime.now().strftime("%Y-%m-%d %H:%M:%S")
        print(f"מחבר המסמך עודכן ל-{author}")
    
    def save(self) -> DocumentMemento:
        return DocumentMemento(self._content, self._metadata.copy())
    
    def restore(self, memento: DocumentMemento) -> None:
        self._content = memento.get_content()
        self._metadata = memento.get_metadata()
        print(f"מסמך {self._title} שוחזר למצב מ-{memento.get_timestamp()}")

class DocumentHistory:
    def __init__(self):
        self._mementos: List[DocumentMemento] = []
    
    def add_memento(self, memento: DocumentMemento) -> None:
        self._mementos.append(memento)
    
    def get_memento(self, index: int) -> DocumentMemento:
        return self._mementos[index]
    
    def get_history(self) -> List[datetime]:
        return [m.get_timestamp() for m in self._mementos]

# שימוש
if __name__ == "__main__":
    # יצירת מסמך
    doc = Document("מסמך חשוב")
    
    # יצירת היסטוריה
    history = DocumentHistory()
    
    # עריכת המסמך
    doc.set_author("יוסי")
    history.add_memento(doc.save())
    
    doc.write("זהו מסמך חשוב")
    history.add_memento(doc.save())
    
    doc.write("זהו מסמך חשוב מאוד")
    history.add_memento(doc.save())
    
    # חזרה למצב קודם
    doc.restore(history.get_memento(1))  # זהו מסמך חשוב
    doc.restore(history.get_memento(0))  # מסמך ריק</code></pre>
        </section>

        <section class="card">
            <h2 class="flex-center">
                <i class="fas fa-plus-circle icon"></i>
                יתרונות
            </h2>
            <h3>למתחילים:</h3>
            <ul>
                <li>מאפשרת שמירה ושחזור של מצבים</li>
                <li>מאפשרת ביטול שינויים</li>
                <li>מאפשרת שמירת היסטוריה של מצבים</li>
            </ul>

            <h3>למתקדמים:</h3>
            <ul>
                <li>מאפשרת שמירה ושחזור של מצבים</li>
                <li>מאפשרת ביטול שינויים</li>
                <li>מאפשרת שמירת היסטוריה של מצבים</li>
                <li>מאפשרת שמירה על עקרון ה-Open/Closed Principle</li>
                <li>מאפשרת הפחתת הצימוד בין המחלקות</li>
                <li>מאפשרת הרחבה של המערכת עם פונקציונליות חדשה</li>
                <li>מאפשרת ניהול טוב יותר של המצבים</li>
            </ul>
        </section>

        <section class="card">
            <h2 class="flex-center">
                <i class="fas fa-minus-circle icon"></i>
                חסרונות
            </h2>
            <h3>למתחילים:</h3>
            <ul>
                <li>עלולה להקשות על הבנת הקוד</li>
                <li>עלולה ליצור מספר רב של אובייקטים</li>
                <li>עלולה להקשות על ניהול הקוד</li>
            </ul>

            <h3>למתקדמים:</h3>
            <ul>
                <li>עלולה להקשות על הבנת הקוד</li>
                <li>עלולה ליצור מספר רב של אובייקטים</li>
                <li>עלולה להקשות על ניהול הקוד</li>
                <li>עלולה להקשות על בדיקות (Testing)</li>
                <li>עלולה להקשות על ניהול גרסאות</li>
                <li>עלולה להקשות על ניהול תלויות</li>
            </ul>
        </section>

        <section class="card">
            <h2 class="flex-center">
                <i class="fas fa-exclamation-triangle icon"></i>
                מלכודות נפוצות
            </h2>
            <h3>למתחילים:</h3>
            <ul>
                <li>אי-הקפדה על יצירת ממשק פשוט</li>
                <li>אי-הקפדה על שימוש נכון באובייקטים</li>
                <li>אי-הקפדה על ניהול תלויות</li>
            </ul>

            <h3>למתקדמים:</h3>
            <ul>
                <li>אי-הקפדה על יצירת ממשק פשוט</li>
                <li>אי-הקפדה על שימוש נכון באובייקטים</li>
                <li>אי-הקפדה על ניהול תלויות</li>
                <li>אי-הקפדה על ניהול גרסאות</li>
                <li>אי-הקפדה על בדיקות (Testing)</li>
                <li>אי-הקפדה על ניהול זיכרון</li>
            </ul>
        </section>

        <section class="card">
            <h2 class="flex-center">
                <i class="fas fa-balance-scale icon"></i>
                השוואה לתבניות אחרות
            </h2>
            <h3>למתחילים:</h3>
            <table>
                <tr>
                    <th>תבנית</th>
                    <th>הבדל</th>
                </tr>
                <tr>
                    <td>Command</td>
                    <td>מתמקדת בפעולות, בעוד Memento מתמקדת במצבים</td>
                </tr>
                <tr>
                    <td>State</td>
                    <td>מתמקדת במצבים, בעוד Memento מתמקדת בשמירת מצב</td>
                </tr>
            </table>

            <h3>למתקדמים:</h3>
            <table>
                <tr>
                    <th>תבנית</th>
                    <th>הבדל</th>
                </tr>
                <tr>
                    <td>Command</td>
                    <td>מתמקדת בפעולות, בעוד Memento מתמקדת במצבים</td>
                </tr>
                <tr>
                    <td>State</td>
                    <td>מתמקדת במצבים, בעוד Memento מתמקדת בשמירת מצב</td>
                </tr>
                <tr>
                    <td>Observer</td>
                    <td>מתמקדת בהודעות, בעוד Memento מתמקדת במצבים</td>
                </tr>
                <tr>
                    <td>Strategy</td>
                    <td>מתמקדת באלגוריתמים, בעוד Memento מתמקדת במצבים</td>
                </tr>
            </table>
        </section>

        <section class="card">
            <h2 class="flex-center">
                <i class="fas fa-pencil-alt icon"></i>
                תרגול
            </h2>
            <h3>למתחילים:</h3>
            <p>נסה ליישם את תבנית Memento במקרים הבאים:</p>
            <ol>
                <li>עורך טקסט</li>
                <li>מערכת ניהול מסמכים</li>
                <li>מערכת ניהול תמונות</li>
            </ol>

            <h3>למתקדמים:</h3>
            <p>נסה ליישם את תבנית Memento במקרים הבאים:</p>
            <ol>
                <li>עורך טקסט</li>
                <li>מערכת ניהול מסמכים</li>
                <li>מערכת ניהול תמונות</li>
                <li>מערכת ניהול תהליכים</li>
            </ol>
        </section>

        <section class="card">
            <h2 class="flex-center">
                <i class="fas fa-lightbulb icon"></i>
                טיפים ליישום
            </h2>
            <h3>למתחילים:</h3>
            <ul>
                <li>השתמש בממשק פשוט ונוח לשימוש</li>
                <li>ודא שהאובייקטים מספקים את כל הפונקציונליות הנדרשת</li>
                <li>הוסף בדיקות תקינות לממשק הפשוט</li>
            </ul>

            <h3>למתקדמים:</h3>
            <ul>
                <li>השתמש בממשק פשוט ונוח לשימוש</li>
                <li>ודא שהאובייקטים מספקים את כל הפונקציונליות הנדרשת</li>
                <li>הוסף בדיקות תקינות לממשק הפשוט</li>
                <li>שקול שימוש ב-Dependency Injection</li>
                <li>השתמש ב-Interface Segregation Principle</li>
                <li>הוסף תיעוד מפורט לממשקים והמימושים</li>
            </ul>
        </section>

        <section class="card">
            <h2 class="flex-center">
                <i class="fas fa-book icon"></i>
                מקרי שימוש נפוצים
            </h2>
            <h3>למתחילים:</h3>
            <ul>
                <li>עורכי טקסט</li>
                <li>מערכות ניהול מסמכים</li>
                <li>מערכות ניהול תמונות</li>
            </ul>

            <h3>למתקדמים:</h3>
            <ul>
                <li>עורכי טקסט</li>
                <li>מערכות ניהול מסמכים</li>
                <li>מערכות ניהול תמונות</li>
                <li>מערכות ניהול תהליכים</li>
                <li>מערכות ניהול מצבים</li>
            </ul>
        </section>

        <div class="related-patterns card">
            <h2 class="flex-center">
                <i class="fas fa-link icon"></i>
                תבניות קשורות
            </h2>
            <ul>
                <li><a href="command.html" class="flex-center"><i class="fas fa-terminal icon"></i>Command</a></li>
                <li><a href="state.html" class="flex-center"><i class="fas fa-toggle-on icon"></i>State</a></li>
                <li><a href="observer.html" class="flex-center"><i class="fas fa-eye icon"></i>Observer</a></li>
                <li><a href="strategy.html" class="flex-center"><i class="fas fa-cogs icon"></i>Strategy</a></li>
            </ul>
        </div>
    </main>

    <script src="../js/load-sidebar.js"></script>
</body>
</html> 